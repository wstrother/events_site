<div class="flex flex-row justify-between items-end mb-4 pb-1">
  <h1>{{ question.question_text }}</h1>

  <div>
  {{ question.get_vote_count }} Vote{{ question.get_vote_count|pluralize }} so far...
  </div>
</div>

<form id="vote-form"
  hx-post="{% url 'polls:vote' question.id %}"
  hx-swap="innerHTML settle:0ms"
  hx-target="#page-contents"
  hx-push-url="true"
>

{% csrf_token %}

<fieldset class="flex flex-col border-[2px] border-slate-600 p-1 gap-4 rounded-sm py-4">
  <legend class="badge w-3/4">
    {%if not submitted %}Cast your vote!{% else %}Your vote has been cast!{% endif %}
  </legend>

  {% for choice in question.choice_set.all %}
    <label for="id_choices_{{forloop.counter}}" class="grid grid-cols-[1fr_3fr_75%] gap-4">

      {% if not submitted %}
        <input type="radio" name="choices" value="{{choice.id}}" id="id_choices_{{forloop.counter}}" 
          class="accent-slate-500 border-slate-500 h-3/4 my-auto rounded-md"
          required />
        {% else %}
        <span>&nbsp;</span>
      {% endif %}

      <span>{{ choice.choice_text }}</span>

      {% include 'polls/components/vote_meter.html' %}
    </label>
  {% endfor %}
</fieldset>


<div class="mt-2 flex flex-row justify-between">
  <div>
  {% if not submitted %}
    <input type="submit" value="Submit Vote" class="btn px-2"/>
    {% else %}
    &nbsp;
  {% endif %}
  </div>

  <div>
  {% if submitted %}
    <a href="{% url 'polls:detail' question.id %}"
      hx-boost="true"
      class="btn px-2"
      >Vote again?</a>
  {% endif %}
  </div>
</div>

</form>
