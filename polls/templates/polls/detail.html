<h1>{{ question.question_text }}</h1>

<div>
{{ question.get_vote_count }} Vote{{ question.get_vote_count|pluralize }} so far...
</div>

<form id="vote-form"
  hx-post="{% url 'polls:vote' question.id %}"
  hx-swap="innerHTML settle:0ms"
  hx-target="#page-contents"
  hx-push-url="true"
>

{% csrf_token %}

<fieldset class="flex flex-col">
  <legend>
    {%if not submitted %}Cast your vote!{% else %}Your vote has been cast!{% endif %}
  </legend>

  {% for choice in question.choice_set.all %}
    <label for="id_choices_{{forloop.counter}}">

      {% if not submitted %}
        <span>
        <input type="radio" name="choices" value="{{choice.id}}" id="id_choices_{{forloop.counter}}" required />
        </span>
      {% endif %}

      <span>{{ choice.choice_text }}</span>

      {% include 'polls/components/vote_meter.html' %}
    </label>
  {% endfor %}
</fieldset>


{% if not submitted %}
  <input type="submit" value="Submit Vote" />
{% else %}
  <div><a href="{% url 'polls:detail' question.id %}"
      hx-boost="true"
    >Vote again?</div>
{% endif %}

</form>
