{% extends "polls/base.html" %}

  {% load poll_tags %}

  {% block content %}
  
    <h1>{{ question.question_text }}</h1>
    <div>
      {{ question.get_vote_count }} Vote{{ question.get_vote_count|pluralize }} so far...
    </div>

    <form id="vote-form"
      hx-post="{% url 'polls:vote' question.id %}"
      hx-swap="outerHTML"
    >
    
    {% csrf_token %}

    <fieldset class="flex flex-col">
      <legend>Cast your vote!</legend>

      {% for choice_field, choice_item in form.choices|zip:question.choice_set.all %}
        <label for="{{ choice_field.id_for_label}}">
          <span>{{ choice_field.tag }}</span>
          <span>{{ choice_field.choice_label }}</span>
          {% include 'polls/components/vote_meter.html' with votes=choice_item.votes percent=choice_item.get_vote_share %}
        </label>
      {% endfor %}

    </fieldset>


    <input type="submit" value="Submit Vote" />
    </form>

  {% endblock content %}
